@startuml RAG demo container diagram

!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v18.0/dist
!include AWSPuml/AWSCommon.puml

!include AWSPuml/General/Users.puml
!include AWSPuml/ApplicationIntegration/APIGateway.puml
!include AWSPuml/Compute/Lambda.puml
!include AWSPuml/Database/DynamoDB.puml
!include AWSPuml/Storage/SimpleStorageService.puml

left to right direction

APIGateway(ragAPI, "RAG API", "API to upload and and retrieve on query")
DynamoDB(sessionDb, "Session Database", "maintain session data")
Lambda(uploadDocument, "Upload document", "return sessionId")
Lambda(queryDocument, "Query document", "return generated responses")
SimpleStorageService(docStore, "Document Storage", "Object store for documents")
Users(sources, "RAG demo react app", "n users")

sources --> ragAPI
ragAPI --> uploadDocument
ragAPI --> queryDocument
queryDocument --> sessionDb
uploadDocument --> sessionDb
uploadDocument --> docStore
@enduml